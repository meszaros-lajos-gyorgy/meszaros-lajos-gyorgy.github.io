<!DOCTYPE html>
<html>
<head>
  <title>COD APK API demo</title>
  <meta charset="utf-8" />
  <style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  user-select: none;
}
#content {
  height: 100%;
  font-family: sans-serif;
  font-size: 1.4em;
  text-shadow: 0 1px 1px #000;
}
video {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
  z-index: -1;
}
  </style>
</head>
<body>
  <div id="content">
    <div id="tag1" style="font-size:2em;font-weight:bold;text-align:center;padding:20px 0;color:red;"></div>
    <div id="tag2" style="color:yellow;"></div>
    <div id="tag3" style="color:green;"></div>
  </div>
  <script>
    const content = document.getElementById('content')
    const text1 = document.getElementById('tag1')
    const text2 = document.getElementById('tag2')
    const text3 = document.getElementById('tag3')
    const videoURL = 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4'

    const addVideoPlayer = (url) => {
      const video = document.createElement('video')
      video.autoplay = true
      video.muted = true
      video.loop = true
      video.controls = false
      video.src = url
      document.body.appendChild(video)
    }
    
    if (typeof COD === 'undefined') {
      text1.innerText = 'Böngészőben vagyunk!'
      addVideoPlayer(videoURL)

      text2.innerText = 'deviceInfo.ean = ?'
      text3.innerText = 'contentData.kulcs = ?'
    } else {
      const printDeviceInfo = () => {
        const deviceInfo = JSON.parse(COD.getDeviceInfo())
        text2.innerText = 'deviceInfo.ean = ' + deviceInfo.ean
      }
      const printContentData = () => {
        const contentData = JSON.parse(COD.getContentData())
        text3.innerText = 'contentData.kulcs = ' + contentData.kulcs
      }

      text1.innerText = 'APK-ban vagyunk!'
      COD.startPlayingVideoFile(videoURL)

      printDeviceInfo()
      printContentData()

      COD.onContentDataChanged = () => {
        printDeviceInfo()
        printContentData()
      }
    }
  </script>
</body>
</html>